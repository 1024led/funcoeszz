#!/usr/bin/env bash

values=3
tests=(

# XXX aceitar prefixo + também?

# número inválido ou não reconhecido
''	''	foo		t	"Número inválido 'foo'"
''	''	a5		t	"Número inválido 'a5'"
''	''	5a		t	"Número inválido '5a'"

# decimais e fracionários, incompletos
# XXX Aqui devemos tentar adivinhar ou simplesmente retornar 'número inválido'?
#     Acho que quanto menos "espertezas", melhor.
''	''	1.	t	1,00
''	''	1,	t	1,00
''	''	,1	t	0,1
''	''	.	t	0
''	''	,	t	0
''	''	-1.	t	-1,00
''	''	-1,	t	-1,00
''	''	-,1	t	-0,1
''	''	-.	t	0
''	''	-,	t	0

### Sem argumentos, formata no padrão brasileiro: 1.234.567,89

# zero
''	''	0		t	0
''	''	0,00		t	0,00
''	''	0,0000		t	0,0000		# XXX o certo é manter as casas ou deixar 2?

# decimais positivos
''	''	1		t	1
''	''	12		t	12
''	''	123		t	123
''	''	1234		t	1.234
''	''	12345		t	12.345
''	''	123456		t	123.456
''	''	1234567		t	1.234.567
''	''	12345678	t	12.345.678
''	''	123456789	t	123.456.789
''	''	1234567890	t	1.234.567.890
# decimais negativos
''	''	-1		t	-1
''	''	-12		t	-12
''	''	-123		t	-123
''	''	-1234		t	-1.234
''	''	-12345		t	-12.345
''	''	-123456		t	-123.456
''	''	-1234567	t	-1.234.567
''	''	-12345678	t	-12.345.678
''	''	-123456789	t	-123.456.789
''	''	-1234567890	t	-1.234.567.890
# fracionários positivos (00)
''	''	1,00		t	1,00
''	''	12,00		t	12,00
''	''	123,00		t	123,00
''	''	1234,00		t	1.234,00
''	''	12345,00	t	12.345,00
''	''	123456,00	t	123.456,00
''	''	1234567,00	t	1.234.567,00
''	''	12345678,00	t	12.345.678,00
''	''	123456789,00	t	123.456.789,00
''	''	1234567890,00	t	1.234.567.890,00
# fracionários positivos (uma casa)
''	''	1,1		t	1,1                    # XXX o certo é deixar 1 ou 2?
''	''	12,1		t	12,1
''	''	123,1		t	123,1
''	''	1234,1		t	1.234,1
''	''	12345,1		t	12.345,1
''	''	123456,1	t	123.456,1
''	''	1234567,1	t	1.234.567,1
''	''	12345678,1	t	12.345.678,1
''	''	123456789,1	t	123.456.789,1
''	''	1234567890,1	t	1.234.567.890,1
# fracionários positivos (duas casas)
''	''	1,12		t	1,12
''	''	12,12		t	12,12
''	''	123,12		t	123,12
''	''	1234,12		t	1.234,12
''	''	12345,12	t	12.345,12
''	''	123456,12	t	123.456,12
''	''	1234567,12	t	1.234.567,12
''	''	12345678,12	t	12.345.678,12
''	''	123456789,12	t	123.456.789,12
''	''	1234567890,12	t	1.234.567.890,12
# fracionários positivos (muitas casas)
''	''	1,123456789		t	1,123456789           # XXX o certo é manter as casas ou deixar 2?
''	''	12,123456789		t	12,123456789
''	''	123,123456789		t	123,123456789
''	''	1234,123456789		t	1.234,123456789
''	''	12345,123456789		t	12.345,123456789
''	''	123456,123456789	t	123.456,123456789
''	''	1234567,123456789	t	1.234.567,123456789
''	''	12345678,123456789	t	12.345.678,123456789
''	''	123456789,123456789	t	123.456.789,123456789
''	''	1234567890,123456789	t	1.234.567.890,123456789
# fracionários negativos (00)
''	''	-1,00		t	-1,00
''	''	-12,00		t	-12,00
''	''	-123,00		t	-123,00
''	''	-1234,00	t	-1.234,00
''	''	-12345,00	t	-12.345,00
''	''	-123456,00	t	-123.456,00
''	''	-1234567,00	t	-1.234.567,00
''	''	-12345678,00	t	-12.345.678,00
''	''	-123456789,00	t	-123.456.789,00
''	''	-1234567890,00	t	-1.234.567.890,00
# fracionários negativos (uma casa)
''	''	-1,1		t	-1,1                    # XXX o certo é deixar 1 ou 2?
''	''	-12,1		t	-12,1
''	''	-123,1		t	-123,1
''	''	-1234,1		t	-1.234,1
''	''	-12345,1	t	-12.345,1
''	''	-123456,1	t	-123.456,1
''	''	-1234567,1	t	-1.234.567,1
''	''	-12345678,1	t	-12.345.678,1
''	''	-123456789,1	t	-123.456.789,1
''	''	-1234567890,1	t	-1.234.567.890,1
# fracionários negativos (duas casas)
''	''	-1,12		t	-1,12
''	''	-12,12		t	-12,12
''	''	-123,12		t	-123,12
''	''	-1234,12	t	-1.234,12
''	''	-12345,12	t	-12.345,12
''	''	-123456,12	t	-123.456,12
''	''	-1234567,12	t	-1.234.567,12
''	''	-12345678,12	t	-12.345.678,12
''	''	-123456789,12	t	-123.456.789,12
''	''	-1234567890,12	t	-1.234.567.890,12
# fracionários negativos (muitas casas)
''	''	-1,123456789		t	-1,123456789          # XXX o certo é manter as casas ou deixar 2?
''	''	-12,123456789		t	-12,123456789
''	''	-123,123456789		t	-123,123456789
''	''	-1234,123456789		t	-1.234,123456789
''	''	-12345,123456789	t	-12.345,123456789
''	''	-123456,123456789	t	-123.456,123456789
''	''	-1234567,123456789	t	-1.234.567,123456789
''	''	-12345678,123456789	t	-12.345.678,123456789
''	''	-123456789,123456789	t	-123.456.789,123456789
''	''	-1234567890,123456789	t	-1.234.567.890,123456789
# decimais e fracionários, já pontuados (não altera nada)
''	''	1.234			t	1.234
''	''	12.345			t	12.345
''	''	123.456			t	123.456
''	''	1.234.567		t	1.234.567
''	''	12.345.678		t	12.345.678
''	''	123.456.789		t	123.456.789
''	''	1.234.567.890		t	1.234.567.890
''	''	-1.234			t	-1.234
''	''	-12.345			t	-12.345
''	''	-123.456		t	-123.456
''	''	-1.234.567		t	-1.234.567
''	''	-12.345.678		t	-12.345.678
''	''	-123.456.789		t	-123.456.789
''	''	-1.234.567.890		t	-1.234.567.890
''	''	1.234,12		t	1.234,12
''	''	12.345,12		t	12.345,12
''	''	123.456,12		t	123.456,12
''	''	1.234.567,12		t	1.234.567,12
''	''	12.345.678,12		t	12.345.678,12
''	''	123.456.789,12		t	123.456.789,12
''	''	1.234.567.890,12	t	1.234.567.890,12
''	''	-1.234,12		t	-1.234,12
''	''	-12.345,12		t	-12.345,12
''	''	-123.456,12		t	-123.456,12
''	''	-1.234.567,12		t	-1.234.567,12
''	''	-12.345.678,12		t	-12.345.678,12
''	''	-123.456.789,12		t	-123.456.789,12
''	''	-1.234.567.890,12	t	-1.234.567.890,12


#########################################################################

### Mesmos testes, agora com a opção -m

# Nota: para números monetários negativos, estes são os padrões utilizados:
#
# Google Docs: -R$ 1,23
# LibreOffice: -R$ 1,23
# Excel      : -R$ 1,23
# Numbers    : -R$1,23

# zero
''	-m	0		t	"R$ 0,00"
''	-m	0,00		t	"R$ 0,00"
''	-m	0,0000		t	"R$ 0,00"

# decimais positivos
''	-m	1		t	"R$ 1,00"
''	-m	12		t	"R$ 12,00"
''	-m	123		t	"R$ 123,00"
''	-m	1234		t	"R$ 1.234,00"
''	-m	12345		t	"R$ 12.345,00"
''	-m	123456		t	"R$ 123.456,00"
''	-m	1234567		t	"R$ 1.234.567,00"
''	-m	12345678	t	"R$ 12.345.678,00"
''	-m	123456789	t	"R$ 123.456.789,00"
''	-m	1234567890	t	"R$ 1.234.567.890,00"
# decimais negativos
''	-m	-1		t	"-R$ 1,00"
''	-m	-12		t	"-R$ 12,00"
''	-m	-123		t	"-R$ 123,00"
''	-m	-1234		t	"-R$ 1.234,00"
''	-m	-12345		t	"-R$ 12.345,00"
''	-m	-123456		t	"-R$ 123.456,00"
''	-m	-1234567	t	"-R$ 1.234.567,00"
''	-m	-12345678	t	"-R$ 12.345.678,00"
''	-m	-123456789	t	"-R$ 123.456.789,00"
''	-m	-1234567890	t	"-R$ 1.234.567.890,00"
# fracionários positivos (00)
''	-m	1,00		t	"R$ 1,00"
''	-m	12,00		t	"R$ 12,00"
''	-m	123,00		t	"R$ 123,00"
''	-m	1234,00		t	"R$ 1.234,00"
''	-m	12345,00	t	"R$ 12.345,00"
''	-m	123456,00	t	"R$ 123.456,00"
''	-m	1234567,00	t	"R$ 1.234.567,00"
''	-m	12345678,00	t	"R$ 12.345.678,00"
''	-m	123456789,00	t	"R$ 123.456.789,00"
''	-m	1234567890,00	t	"R$ 1.234.567.890,00"
# fracionários positivos (uma casa)
''	-m	1,1		t	"R$ 1,10"
''	-m	12,1		t	"R$ 12,10"
''	-m	123,1		t	"R$ 123,10"
''	-m	1234,1		t	"R$ 1.234,10"
''	-m	12345,1		t	"R$ 12.345,10"
''	-m	123456,1	t	"R$ 123.456,10"
''	-m	1234567,1	t	"R$ 1.234.567,10"
''	-m	12345678,1	t	"R$ 12.345.678,10"
''	-m	123456789,1	t	"R$ 123.456.789,10"
''	-m	1234567890,1	t	"R$ 1.234.567.890,10"
# fracionários positivos (duas casas)
''	-m	1,12		t	"R$ 1,12"
''	-m	12,12		t	"R$ 12,12"
''	-m	123,12		t	"R$ 123,12"
''	-m	1234,12		t	"R$ 1.234,12"
''	-m	12345,12	t	"R$ 12.345,12"
''	-m	123456,12	t	"R$ 123.456,12"
''	-m	1234567,12	t	"R$ 1.234.567,12"
''	-m	12345678,12	t	"R$ 12.345.678,12"
''	-m	123456789,12	t	"R$ 123.456.789,12"
''	-m	1234567890,12	t	"R$ 1.234.567.890,12"
# fracionários positivos (muitas casas)
''	-m	1,123456789		t	"R$ 1,12"
''	-m	12,123456789		t	"R$ 12,12"
''	-m	123,123456789		t	"R$ 123,12"
''	-m	1234,123456789		t	"R$ 1.234,12"
''	-m	12345,123456789		t	"R$ 12.345,12"
''	-m	123456,123456789	t	"R$ 123.456,12"
''	-m	1234567,123456789	t	"R$ 1.234.567,12"
''	-m	12345678,123456789	t	"R$ 12.345.678,12"
''	-m	123456789,123456789	t	"R$ 123.456.789,12"
''	-m	1234567890,123456789	t	"R$ 1.234.567.890,12"
# fracionários negativos (00)
''	-m	-1,00		t	"-R$ 1,00"
''	-m	-12,00		t	"-R$ 12,00"
''	-m	-123,00		t	"-R$ 123,00"
''	-m	-1234,00	t	"-R$ 1.234,00"
''	-m	-12345,00	t	"-R$ 12.345,00"
''	-m	-123456,00	t	"-R$ 123.456,00"
''	-m	-1234567,00	t	"-R$ 1.234.567,00"
''	-m	-12345678,00	t	"-R$ 12.345.678,00"
''	-m	-123456789,00	t	"-R$ 123.456.789,00"
''	-m	-1234567890,00	t	"-R$ 1.234.567.890,00"
# fracionários negativos (uma casa)
''	-m	-1,1		t	"-R$ 1,10"
''	-m	-12,1		t	"-R$ 12,10"
''	-m	-123,1		t	"-R$ 123,10"
''	-m	-1234,1		t	"-R$ 1.234,10"
''	-m	-12345,1	t	"-R$ 12.345,10"
''	-m	-123456,1	t	"-R$ 123.456,10"
''	-m	-1234567,1	t	"-R$ 1.234.567,10"
''	-m	-12345678,1	t	"-R$ 12.345.678,10"
''	-m	-123456789,1	t	"-R$ 123.456.789,10"
''	-m	-1234567890,1	t	"-R$ 1.234.567.890,10"
# fracionários negativos (duas casas)
''	-m	-1,12		t	"-R$ 1,12"
''	-m	-12,12		t	"-R$ 12,12"
''	-m	-123,12		t	"-R$ 123,12"
''	-m	-1234,12	t	"-R$ 1.234,12"
''	-m	-12345,12	t	"-R$ 12.345,12"
''	-m	-123456,12	t	"-R$ 123.456,12"
''	-m	-1234567,12	t	"-R$ 1.234.567,12"
''	-m	-12345678,12	t	"-R$ 12.345.678,12"
''	-m	-123456789,12	t	"-R$ 123.456.789,12"
''	-m	-1234567890,12	t	"-R$ 1.234.567.890,12"
# fracionários negativos (muitas casas)
''	-m	-1,123456789		t	"-R$ 1,12"
''	-m	-12,123456789		t	"-R$ 12,12"
''	-m	-123,123456789		t	"-R$ 123,12"
''	-m	-1234,123456789		t	"-R$ 1.234,12"
''	-m	-12345,123456789	t	"-R$ 12.345,12"
''	-m	-123456,123456789	t	"-R$ 123.456,12"
''	-m	-1234567,123456789	t	"-R$ 1.234.567,12"
''	-m	-12345678,123456789	t	"-R$ 12.345.678,12"
''	-m	-123456789,123456789	t	"-R$ 123.456.789,12"
''	-m	-1234567890,123456789	t	"-R$ 1.234.567.890,12"
# decimais e fracionários, já pontuados (não altera nada)
''	-m	1.234			t	"R$ 1.234"
''	-m	12.345			t	"R$ 12.345"
''	-m	123.456			t	"R$ 123.456"
''	-m	1.234.567		t	"R$ 1.234.567"
''	-m	12.345.678		t	"R$ 12.345.678"
''	-m	123.456.789		t	"R$ 123.456.789"
''	-m	1.234.567.890		t	"R$ 1.234.567.890"
''	-m	-1.234			t	"-R$ 1.234"
''	-m	-12.345			t	"-R$ 12.345"
''	-m	-123.456		t	"-R$ 123.456"
''	-m	-1.234.567		t	"-R$ 1.234.567"
''	-m	-12.345.678		t	"-R$ 12.345.678"
''	-m	-123.456.789		t	"-R$ 123.456.789"
''	-m	-1.234.567.890		t	"-R$ 1.234.567.890"
''	-m	1.234,12		t	"R$ 1.234,12"
''	-m	12.345,12		t	"R$ 12.345,12"
''	-m	123.456,12		t	"R$ 123.456,12"
''	-m	1.234.567,12		t	"R$ 1.234.567,12"
''	-m	12.345.678,12		t	"R$ 12.345.678,12"
''	-m	123.456.789,12		t	"R$ 123.456.789,12"
''	-m	1.234.567.890,12	t	"R$ 1.234.567.890,12"
''	-m	-1.234,12		t	"-R$ 1.234,12"
''	-m	-12.345,12		t	"-R$ 12.345,12"
''	-m	-123.456,12		t	"-R$ 123.456,12"
''	-m	-1.234.567,12		t	"-R$ 1.234.567,12"
''	-m	-12.345.678,12		t	"-R$ 12.345.678,12"
''	-m	-123.456.789,12		t	"-R$ 123.456.789,12"
''	-m	-1.234.567.890,12	t	"-R$ 1.234.567.890,12"

# Arredondamento
''	-m	1,234			t	"R$ 1,23"
''	-m	1,235			t	"R$ 1,24"
''	-m	1,236			t	"R$ 1,24"

)
. _lib
